# üöÄ Quick Start - Despliegue en Render

## ‚úÖ Cambios Completados

1. ‚úÖ **Dockerfile corregido** - Eliminada dependencia de archivo de credenciales
2. ‚úÖ **Script de inicio actualizado** - Configurado para Render con PORT din√°mico
3. ‚úÖ **render.yaml creado** - Configuraci√≥n de servicio para Render
4. ‚úÖ **Documentaci√≥n completa** - Ver `RENDER_DEPLOYMENT.md`
5. ‚úÖ **C√≥digo subido a GitHub** - https://github.com/Jeremydevlol/speedleads-server.git

## üéØ Pr√≥ximos Pasos

### 1. Configurar Servicio en Render

Ve a: https://dashboard.render.com/web/srv-d3occ13e5dus73aki5m0

#### A. Conectar Repositorio
- **Settings** ‚Üí **Build & Deploy**
- **Repository**: `https://github.com/Jeremydevlol/speedleads-server.git`
- **Branch**: `main`
- **Auto-Deploy**: ‚úÖ Enabled

#### B. Configurar Build
- **Environment**: Docker
- **Dockerfile Path**: `./Dockerfile`
- **Docker Command**: (dejar vac√≠o, usa CMD del Dockerfile)

#### C. Configurar Variables de Entorno
Ve a **Environment** y agrega estas variables **CR√çTICAS**:

```bash
# Conexi√≥n
NODE_ENV=production
PORT=5001
FRONTEND_URL=https://app.uniclick.io
BACKEND_URL=https://speedleads-server.onrender.com

# Supabase (OBTENER DE TU .env)
SUPABASE_URL=<tu_valor>
SUPABASE_ANON_KEY=<tu_valor>
SUPABASE_SERVICE_ROLE_KEY=<tu_valor>
DATABASE_URL=<tu_valor>

# Auth0 (OBTENER DE TU .env)
AUTH0_DOMAIN=<tu_valor>
AUTH0_CLIENT_ID=<tu_valor>
AUTH0_CLIENT_SECRET=<tu_valor>

# Google OAuth (OBTENER DE TU .env)
GOOGLE_CLIENT_ID=<tu_valor>
GOOGLE_CLIENT_SECRET=<tu_valor>
GOOGLE_REDIRECT_URI=https://app.uniclick.io/login/callback

# Google APIs (OBTENER DE TU .env)
GOOGLE_VISION_API_KEY=<tu_valor>
GOOGLE_TRANSLATE_API_KEY=<tu_valor>

# SendGrid (OBTENER DE TU .env)
SENDGRID_API_KEY=<tu_valor>
SENDGRID_FROM_EMAIL=affiliates@uniclick.io
SENDGRID_INVITE_TEMPLATE_ID=<tu_valor>

# Stripe (OBTENER DE TU .env)
STRIPE_SECRET_KEY=<tu_valor>
STRIPE_PUBLISHABLE_KEY=<tu_valor>

# JWT y Sesiones (OBTENER DE TU .env)
JWT_SECRET=<tu_valor>
SESSION_SECRET=<tu_valor>
COOKIE_DOMAIN=.uniclick.io
SESSION_DOMAIN=.uniclick.io

# OpenAI (OBTENER DE TU .env)
OPENAI_API_KEY=<tu_valor>

# Configuraci√≥n Adicional
ENABLE_WILDCARD_SUBDOMAINS=true
FORCE_LOGIN=false
CLOUDFRONT_DOMAIN=domains.uniclick.io
NEXT_PUBLIC_CLOUDFRONT_DOMAIN=domains.uniclick.io
NEXT_TELEMETRY_DISABLED=1
```

### 2. Desplegar

Una vez configuradas las variables:

1. Ve a **Manual Deploy**
2. Click en **Deploy latest commit**
3. Espera 5-10 minutos mientras se construye la imagen Docker
4. Monitorea los logs en tiempo real

### 3. Verificar Despliegue

```bash
# Health check
curl https://speedleads-server.onrender.com/api/health

# Debe responder:
# {"status":"ok","timestamp":"..."}
```

### 4. Configurar Frontend

El frontend en `https://app.uniclick.io` debe apuntar a:

```javascript
// En tu archivo de configuraci√≥n del frontend
const API_URL = 'https://speedleads-server.onrender.com';
```

## üîç Monitoreo

### Ver Logs
```bash
# Desde Render Dashboard
https://dashboard.render.com/web/srv-d3occ13e5dus73aki5m0/logs

# O desde CLI
render logs srv-d3occ13e5dus73aki5m0 --tail
```

### M√©tricas
- CPU Usage
- Memory Usage  
- Request Rate
- Response Time

## üêõ Troubleshooting Com√∫n

### Error: "Health check failed"
**Causa**: El servidor no responde en `/api/health` en 30 segundos
**Soluci√≥n**: 
1. Verifica los logs para ver errores de inicio
2. Aseg√∫rate de que todas las variables de entorno est√©n configuradas
3. Verifica que el puerto sea 5001 o el que Render asigne

### Error: "Build failed"
**Causa**: Falta alg√∫n archivo o dependencia
**Soluci√≥n**:
1. Verifica que `dist/app.js` exista en el repo
2. Verifica que `docker-start-fast.sh` tenga permisos de ejecuci√≥n
3. Revisa los logs de build para ver el error espec√≠fico

### Error: CORS en el frontend
**Causa**: El origen no est√° permitido
**Soluci√≥n**:
1. Verifica que `FRONTEND_URL=https://app.uniclick.io` est√© configurada
2. El CORS ya est√° configurado en `dist/app.js` para permitir `app.uniclick.io`

## üìû Recursos

- **Dashboard**: https://dashboard.render.com/
- **Documentaci√≥n Completa**: Ver `RENDER_DEPLOYMENT.md`
- **Repositorio**: https://github.com/Jeremydevlol/speedleads-server.git
- **Frontend**: https://app.uniclick.io

## ‚ö° Auto-Deploy

Cada vez que hagas push a `main`, Render desplegar√° autom√°ticamente:

```bash
git add .
git commit -m "Update backend"
git push origin main
```

Render detectar√° el cambio y desplegar√° en ~5-10 minutos.

## üéâ ¬°Listo!

Una vez desplegado, tu backend estar√° disponible en:
- **URL**: https://speedleads-server.onrender.com
- **Health Check**: https://speedleads-server.onrender.com/api/health
- **Status**: https://speedleads-server.onrender.com/status

El frontend en `https://app.uniclick.io` podr√° conectarse autom√°ticamente.
