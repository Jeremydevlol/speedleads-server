# üîÑ Forzar Deploy en Render al √öltimo Commit

## ‚úÖ Problema Resuelto

El workflow viejo de AWS ECS/ECR ha sido **eliminado**. Ahora solo existe el workflow de Render.

**√öltimo commit**: `d48d4e3` - Remove AWS ECS/ECR workflow

## üöÄ C√≥mo Forzar el Deploy del √öltimo Commit

### Opci√≥n 1: Deploy Manual desde Render Dashboard (Recomendado)

1. Ve a tu servicio en Render:
   ```
   https://dashboard.render.com/web/srv-d3occ13e5dus73aki5m0
   ```

2. Click en **"Manual Deploy"** (bot√≥n azul en la parte superior)

3. Selecciona **"Deploy latest commit"**

4. Render construir√° y desplegar√° el commit `d48d4e3`

5. Espera 5-10 minutos y monitorea los logs

### Opci√≥n 2: Forzar con un Commit Vac√≠o

Si Render no detecta el cambio, puedes forzarlo con un commit vac√≠o:

```bash
cd "/Users/jeremyuniclick/api copia"
git commit --allow-empty -m "Force Render redeploy"
git push origin main
```

Esto disparar√° el workflow de GitHub Actions que llamar√° al Deploy Hook de Render.

### Opci√≥n 3: Usar el Deploy Hook Directamente

Si configuraste el secret `RENDER_DEPLOY_HOOK` en GitHub, puedes ejecutar el workflow manualmente:

1. Ve a: https://github.com/Jeremydevlol/speedleads-server/actions
2. Selecciona **"Deploy to Render"**
3. Click en **"Run workflow"**
4. Selecciona branch **"main"**
5. Click en **"Run workflow"**

## üîç Verificar que Render Usa el Commit Correcto

Una vez que el deploy termine, verifica en el Dashboard de Render:

1. Ve a: https://dashboard.render.com/web/srv-d3occ13e5dus73aki5m0
2. En la secci√≥n **"Events"** o **"Deploys"**, verifica que el commit sea `d48d4e3`
3. Debe decir: "Remove AWS ECS/ECR workflow - Use only Render deployment"

## üìä Verificar que el Backend Funciona

```bash
# Health check
curl https://speedleads-server.onrender.com/api/health

# Debe responder:
# {"status":"ok","timestamp":"..."}
```

## üêõ Si Render Sigue Usando el Commit Viejo

### Causa Posible 1: Render no est√° conectado al repositorio correcto
**Soluci√≥n**:
1. Ve a Settings ‚Üí Build & Deploy
2. Verifica que el repositorio sea: `https://github.com/Jeremydevlol/speedleads-server.git`
3. Verifica que la rama sea: `main`

### Causa Posible 2: Auto-Deploy est√° desactivado
**Soluci√≥n**:
1. Ve a Settings ‚Üí Build & Deploy
2. Activa **"Auto-Deploy"**: Yes

### Causa Posible 3: Render tiene el repositorio cacheado
**Soluci√≥n**:
1. Ve a Settings
2. Scroll hasta **"Danger Zone"**
3. Click en **"Clear build cache & deploy"**

## ‚ú® Workflows Actuales

Ahora solo tienes **1 workflow** en GitHub:

```
.github/workflows/render-deploy.yml
```

Este workflow:
- ‚úÖ Se ejecuta en cada push a `main`
- ‚úÖ Llama al Deploy Hook de Render
- ‚úÖ NO intenta desplegar a AWS
- ‚úÖ Es r√°pido y simple

## üéâ Pr√≥ximos Deploys

De ahora en adelante, cada vez que hagas:

```bash
git push origin main
```

El workflow de Render se ejecutar√° autom√°ticamente y desplegar√° la nueva versi√≥n. **No m√°s AWS ECS/ECR**.

## üìù Nota Importante

Si ves errores de "Build and Push to ECR" en GitHub Actions, ign√≥ralos. Esos son de runs anteriores del workflow viejo. Los nuevos pushes solo ejecutar√°n el workflow de Render.
